<script type="text/javascript">
   document.onclick = hide_valueviews;
   var overlay  = document.getElementById("overlay");
   
   function hide_valueviews() {
      var valueviews = document.getElementsByClassName("valueview");
      for(i = 0; i < valueviews.length; i++) {
         valueviews[i].style.display = "none";
      }
      overlay.style.display = "none";

      var ranges = document.getElementsByClassName("range");
      for(i = 0; i < ranges.length; i++) {
         ranges[i].style.zIndex = 0;
      }

      return false;
   } 

   function show_valueview(id) {
      var valueview = document.getElementById(id);

      overlay.style.display = "block";
      valueview.style.display = "block";
      event.cancelBubble = true;
      event.target.style.zIndex = 99;

      valueview.style.top = event.target.offsetTop + event.target.offsetHeight;

      return false;
   }
   function toggleFreespace() {
      var freespace_range = document.getElementsByClassName("freespace")[0];
      if(freespace_range.style.display == "none") {
         freespace_range.style.display = "inline";
      } else {
         freespace_range.style.display = "none";
      }

      event.cancelBubble = true;

      return true;
   }

   function highlight_rows(tid) {
      var tuples = document.getElementsByClassName("tuple");
      for(i = 0; i < tuples.length; i++) {
         xmin = tuples[i].dataset.xmin;
         xmax = tuples[i].dataset.xmax;

         if(xmin <= tid && (tid <= xmax || xmax == 0)) {
            tuples[i].classList.add("highlight");
            if(tid == xmax) {
               tuples[i].classList.add("delete");
            }
         }
      }
   }

   function unhighlight_rows(tid) {
      var tuples = document.getElementsByClassName("tuple");
      for(i = 0; i < tuples.length; i++) {
         xmin = tuples[i].dataset.xmin;
         xmax = tuples[i].dataset.xmax;

         if(xmin <= tid && (tid <= xmax || xmax == 0)) {
            tuples[i].classList.remove("highlight");
            tuples[i].classList.remove("delete");
         }
      }
   }

</script>
</body>
</html>
